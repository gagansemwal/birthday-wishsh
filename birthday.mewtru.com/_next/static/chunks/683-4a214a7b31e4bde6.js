"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[683],{5683:function(e,t,s){s.r(t),s.d(t,{CardFace:function(){return d},FoldingCard:function(){return x}});var a=s(7437),i=s(6576),l=s(2265),n=s(4612);function r(e){let{age:t,onBlowFinish:s}=e,[r,c]=(0,l.useState)(!1),[o,d]=(0,l.useState)(!1),[x,u]=(0,l.useState)(!1),[f,h]=(0,l.useState)([]),m=f.length>0&&f.every(e=>{let{out:t}=e;return t});async function p(){await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),c(!0)}return(0,l.useEffect)(()=>{(async()=>{c("granted"===(await navigator.permissions.query({name:"microphone"})).state)})()},[]),(0,l.useEffect)(()=>{m&&s()},[m]),(0,l.useEffect)(()=>{h(Array.from(Array(t).keys()).map(e=>({left:"".concat((25+450*e/t+Math.floor(40/t)*Math.random())/500*100,"%"),top:15+Math.floor(25*Math.random()),out:!1})))},[t]),(0,l.useEffect)(()=>{if(!x)return;let e=setTimeout(()=>{u(!1)},200);return()=>{clearTimeout(e)}},[x]),(0,l.useEffect)(()=>{x&&h(e=>e.map(e=>({...e,out:!!e.out||.05>Math.random()})))},[x]),(0,l.useEffect)(()=>{o&&r&&(async()=>{let e=await navigator.mediaDevices.getUserMedia({audio:{autoGainControl:!0,echoCancellation:!1,noiseSuppression:!1},video:!1}),t=new AudioContext,s=t.createAnalyser(),a=t.createMediaStreamSource(e),i=t.createScriptProcessor(2048,1,1);s.smoothingTimeConstant=.8,s.fftSize=1024,a.connect(s),s.connect(i),i.connect(t.destination),i.addEventListener("audioprocess",()=>{let e=new Uint8Array(s.frequencyBinCount);s.getByteFrequencyData(e);let t=0;for(let s=0;s<150;s++)t+=e[s];t>1e4&&u(Date.now())})})()},[o,r]),(0,a.jsxs)("div",{className:"flex flex-col justify-between h-full",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-5xl md:text-6xl lg:text-8xl font-bebas text-center mt-10",children:"Blow!"}),(0,a.jsx)("h2",{className:"text-xl font-bebas text-center",children:"(For a surprise)"})]}),!r&&(0,a.jsx)("div",{className:"flex justify-center z-10",children:(0,a.jsx)("button",{className:"bg-purple-500 text-white font-bold px-4 py-2",onClick:()=>p(),children:"Allow access to mic"})}),(0,a.jsx)("div",{className:"px-4 h-[240px]",children:(0,a.jsxs)("div",{className:"cake-body w-full",children:[(0,a.jsxs)("div",{className:"layer w-full f1",children:[(0,a.jsxs)("div",{className:"spot-group sg1",children:[(0,a.jsx)("div",{className:"spot s1"}),(0,a.jsx)("div",{className:"spot s2"}),(0,a.jsx)("div",{className:"spot s3"})]}),(0,a.jsxs)("div",{className:"spot-group sg2",children:[(0,a.jsx)("div",{className:"spot s1"}),(0,a.jsx)("div",{className:"spot s2"})]})]}),(0,a.jsxs)("div",{className:"layer w-full f2",children:[(0,a.jsxs)("div",{className:"spot-group sg3",children:[(0,a.jsx)("div",{className:"spot s1"}),(0,a.jsx)("div",{className:"spot s2"})]}),(0,a.jsxs)("div",{className:"spot-group sg4",children:[(0,a.jsx)("div",{className:"spot s1"}),(0,a.jsx)("div",{className:"spot s2"}),(0,a.jsx)("div",{className:"spot s3"})]})]}),(0,a.jsx)("div",{className:"layer w-full f3",children:(0,a.jsxs)("div",{className:"spot-group sg5",children:[(0,a.jsx)("div",{className:"spot s1"}),(0,a.jsx)("div",{className:"spot s2"}),(0,a.jsx)("div",{className:"spot s3"})]})}),(0,a.jsx)("div",{className:"layer w-full f4",children:(0,a.jsx)("div",{className:"drip-ctn w-full",children:(0,a.jsx)("div",{className:"candle-ctn w-full",children:f.length>0&&(0,a.jsx)(i.E.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},initial:"hide",animate:"show",onAnimationComplete:()=>{d(!0)},children:f.map((e,t)=>(0,a.jsx)(n.Q,{left:e.left,top:e.top,out:e.out},t))})})})})]})})]})}var c={src:"/_next/static/media/purple.9be0f477.svg"},o={src:"/_next/static/media/green.8b87c01a.svg"};function d(e){let{name:t,style:s}=e;return(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden bg-cover bg-center bg-[url(/01.jpg)]",style:s,children:(0,a.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center",children:[(0,a.jsx)("div",{className:"text-center font-bebas text-4xl bg-cover bg-center bg-no-repeat px-8 z-10",style:{backgroundImage:"url(".concat(c.src,")")},children:"Happy Birthday!"}),(0,a.jsx)("div",{className:"text-center font-bebas text-8xl bg-contain bg-center bg-no-repeat px-8 -mx-8 py-24 -my-24",style:{backgroundImage:"url(".concat(o.src,")")},children:t})]})})}function x(e){let{age:t,name:s,message:n}=e,[d,x]=(0,l.useState)(null),[u,f]=(0,l.useState)(!1),[h,m]=(0,l.useState)(!1);return((0,l.useLayoutEffect)(()=>{x(window.innerWidth>window.innerHeight?"horizontal":"vertical")},[]),d)?(0,a.jsxs)(i.E.div,{className:"relative flex ".concat("horizontal"===d?"flex-row h-[70dvh]":"flex-col h-[90dvh]"," max-w-4xl w-full mx-auto cursor-pointer"),onClick:()=>{f(!0)},style:{transformOrigin:"center center",perspective:"1500px"},transition:{ease:"easeInOut",duration:1},initial:{["horizontal"===d?"x":"y"]:"-25%"},animate:{["horizontal"===d?"x":"y"]:u?0:"-25%"},children:[(0,a.jsxs)(i.E.div,{className:"flex-1 h-full relative z-10 bg-white bg-cover bg-center bg-[url(/01.jpg)]",initial:{["horizontal"===d?"rotateY":"rotateX"]:"horizontal"===d?180:-180},animate:{["horizontal"===d?"rotateY":"rotateX"]:u?0:"horizontal"===d?180:-180},transition:{ease:"easeInOut",duration:1},style:{backfaceVisibility:"hidden",transformOrigin:"horizontal"===d?"right":"bottom",transformStyle:"preserve-3d",boxShadow:"inset -20px 0px 20px rgba(0,0,0,0.1)"},children:[(0,a.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden bg-white bg-cover bg-center bg-[url(/01.jpg)]",style:{backfaceVisibility:"hidden",transform:"horizontal"===d?"rotateY(180deg)":"rotateX(180deg)"},children:[(0,a.jsx)(i.E.div,{initial:{scale:1},animate:{scale:1.2},transition:{duration:.5,repeat:1/0,repeatType:"mirror"},className:"font-bebas absolute bottom-8 right-8 opacity-50",children:"click here"}),(0,a.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center",children:[(0,a.jsx)("div",{className:"text-center font-bebas text-4xl bg-cover bg-center bg-no-repeat px-8 z-10",style:{backgroundImage:"url(".concat(c.src,")")},children:"Happy Birthday!"}),(0,a.jsx)("div",{className:"text-center font-bebas text-8xl bg-contain bg-center bg-no-repeat px-8 -mx-8 py-24 -my-24",style:{backgroundImage:"url(".concat(o.src,")")},children:s})]})]}),(0,a.jsx)("div",{className:"h-full w-full flex flex-col justify-center items-center",children:(0,a.jsx)(i.E.div,{className:"px-8 text-2xl font-cursive text-center",style:{opacity:0},animate:{opacity:h?1:0},children:n})})]}),(0,a.jsx)(i.E.div,{className:"flex-1 z-0 h-full transition-all overflow-hidden bg-white bg-cover bg-center bg-[url(/01.jpg)]",style:{transformOrigin:"left",z:-1},children:u&&(0,a.jsx)(r,{age:t,onBlowFinish:()=>{m(!0)}})})]}):null}},4612:function(e,t,s){s.d(t,{Q:function(){return c}});var a=s(7437),i=s(6576),l=s(4666);let n={hide:{top:-200,opacity:0},show:{top:0,opacity:1}},r={hide:{opacity:0,scale:0},show:{opacity:1,scale:1}};function c(e){let{left:t,top:s,out:c,noGlow:o}=e;return(0,a.jsxs)("div",{className:"absolute",style:{left:t,top:s},children:[(0,a.jsxs)(i.E.div,{className:"absolute",variants:n,transition:{ease:"easeOut",duration:.2},children:[(0,a.jsx)("div",{className:"c-base border border-emerald-200 rounded-t"}),(0,a.jsx)("div",{className:"wick"})]}),(0,a.jsxs)(l.M,{children:[!c&&(0,a.jsx)(i.E.div,{className:"w-2 h-4 absolute top-[-20px] left-px",variants:r,exit:{opacity:0,scale:0},transition:{ease:"easeOut",duration:.5},children:(0,a.jsx)("div",{className:"flame"})},"flame"),o||!c&&(0,a.jsx)(i.E.div,{className:"h-[30px] w-[60px] absolute top-[17px] left-[-25px]",variants:r,exit:{opacity:0,scale:0},transition:{ease:"easeOut",duration:.5},children:(0,a.jsx)("div",{className:"highlight"})},"flow")]})]})}}}]);